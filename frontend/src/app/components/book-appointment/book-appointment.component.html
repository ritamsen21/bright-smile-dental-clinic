<div class="booking-container">
  <header class="page-header">
    <div class="header-top-nav">
      <a routerLink="/" class="nav-link"><i class="fas fa-home"></i> Home</a>
      <a routerLink="/appointments" class="nav-link"><i class="fas fa-calendar-alt"></i> View Appointments</a>
      <a routerLink="/doctor/login" class="nav-link"><i class="fas fa-user-md"></i> Doctor Login</a>
    </div>
    <div class="header-icon"><i class="fas fa-tooth"></i></div>
    <h1><i class="fas fa-calendar-check"></i> Book an Appointment</h1>
    <p>Schedule your visit with us</p>
  </header>

  <div class="content">
    <div class="booking-card" *ngIf="!success">
      <div class="doctor-info" *ngIf="doctor">
        <div class="doctor-avatar"><i class="fas fa-user-md"></i></div>
        <h2>{{ doctor.name }}</h2>
        <p class="qualification"><i class="fas fa-graduation-cap"></i> {{ doctor.qualification }}</p>
        <p class="fee"><i class="fas fa-rupee-sign"></i> Consultation Fee: <strong>â‚¹{{ doctor.visitFee }}</strong></p>
      </div>

      <form [formGroup]="bookingForm" (ngSubmit)="onSubmit()" class="booking-form">
        <div class="form-group">
          <label for="fullName"><i class="fas fa-user"></i> Full Name *</label>
          <input
            type="text"
            id="fullName"
            formControlName="fullName"
            class="form-control"
            [class.is-invalid]="submitted && f['fullName'].errors"
            placeholder="Enter your full name"
          />
          <div class="invalid-feedback" *ngIf="submitted && f['fullName'].errors">
            <div *ngIf="f['fullName'].errors['required']">Full name is required</div>
            <div *ngIf="f['fullName'].errors['minlength']">Name must be at least 2 characters</div>
          </div>
        </div>

        <div class="form-group">
          <label for="email"><i class="fas fa-envelope"></i> Email Address *</label>
          <input
            type="email"
            id="email"
            formControlName="email"
            class="form-control"
            [class.is-invalid]="submitted && f['email'].errors"
            placeholder="your@email.com"
          />
          <div class="invalid-feedback" *ngIf="submitted && f['email'].errors">
            <div *ngIf="f['email'].errors['required']">Email is required</div>
            <div *ngIf="f['email'].errors['email']">Please enter a valid email</div>
          </div>
        </div>

        <div class="form-group">
          <label for="phone"><i class="fas fa-phone"></i> Phone Number *</label>
          <input
            type="tel"
            id="phone"
            formControlName="phone"
            class="form-control"
            [class.is-invalid]="submitted && f['phone'].errors"
            placeholder="+91 98765 43210"
          />
          <div class="invalid-feedback" *ngIf="submitted && f['phone'].errors">
            <div *ngIf="f['phone'].errors['required']">Phone number is required</div>
            <div *ngIf="f['phone'].errors['minlength']">Phone must be at least 8 characters</div>
          </div>
        </div>

        <div class="form-group">
          <label for="scheduledFor"><i class="fas fa-calendar-alt"></i> Appointment Date & Time *</label>
          <input
            type="datetime-local"
            id="scheduledFor"
            formControlName="scheduledFor"
            class="form-control"
            [class.is-invalid]="submitted && f['scheduledFor'].errors"
          />
          <div class="invalid-feedback" *ngIf="submitted && f['scheduledFor'].errors">
            <div *ngIf="f['scheduledFor'].errors['required']">Please select date and time</div>
          </div>
        </div>

        <div class="form-group">
          <label for="notes"><i class="fas fa-notes-medical"></i> Additional Notes (Optional)</label>
          <textarea
            id="notes"
            formControlName="notes"
            class="form-control"
            rows="3"
            placeholder="Any special requirements or symptoms..."
          ></textarea>
        </div>

        <div class="error-message" *ngIf="error">
          {{ error }}
        </div>

        <div class="form-actions">
          <button type="button" routerLink="/" class="btn-secondary"><i class="fas fa-times"></i> Cancel</button>
          <button type="submit" class="btn-primary" [disabled]="loading">
            <span *ngIf="!loading"><i class="fas fa-check"></i> Book Appointment</span>
            <span *ngIf="loading"><i class="fas fa-spinner fa-spin"></i> Booking...</span>
          </button>
        </div>
      </form>
    </div>

    <div class="success-card" *ngIf="success">
      <div class="success-icon"><i class="fas fa-check-circle"></i></div>
      <h2><i class="fas fa-smile-beam"></i> Appointment Booked Successfully!</h2>
      <p><i class="fas fa-envelope"></i> You will receive a confirmation email shortly.</p>
      <p class="redirect-message"><i class="fas fa-arrow-right"></i> Redirecting to appointments...</p>
    </div>
  </div>
</div>
